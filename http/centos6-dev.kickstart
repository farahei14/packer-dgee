# Kickstart file automatically generated by anaconda.

#version=DEVEL
install
cdrom
lang fr_FR.UTF-8
keyboard fr-latin9
network --onboot yes --device eth0 --bootproto dhcp --noipv6
rootpw  --iscrypted $6$vm9J5g.Gyc67IPo4$R9Jh2TrtsYXRG4EjSyUOvvt3LdqhaIvxyALvqsJnsQxV7V//Yco0vKROzifHBrXHo6CZhgjY4mcWN/Vvay0DO0
firewall --service=ssh
authconfig --enableshadow --passalgo=sha512
selinux --enforcing
timezone Pacific/Tahiti
bootloader --location=mbr --driveorder=sda --append="crashkernel=auto rhgb quiet"
zerombr
# The following is the partition information you requested
# Note that any partitions you deleted are not expressed
# here so unless you clear all partitions first, this is
# not guaranteed to work
clearpart --all --drives=sda

part /boot --fstype=ext4 --size=500
part pv.008002 --grow --size=1
part swap --asprimary --size=6144

volgroup vg_localhost --pesize=4096 pv.008002
logvol /home --fstype=ext4 --name=LogVol_home --vgname=vg_localhost --size=1024 --grow 
logvol / --fstype=ext4 --name=LogVol_root --vgname=vg_localhost --size=4096
logvol /tmp --fstype=ext4 --name=LogVol_tmp --vgname=vg_localhost --size=2048 --grow --maxsize=4096
logvol /usr --fstype=ext4 --name=LogVol_usr --vgname=vg_localhost --size=6664 --grow --maxsize=8192
logvol /var --fstype=ext4 --name=LogVol_var --vgname=vg_localhost --size=4096 --grow --maxsize=8192

firstboot --disabled
reboot
user --name=vagrant --plaintext --password vagrant

# ajout depot epel
repo --name=epel --baseurl=http://ftp.osuosl.org/pub/fedora-epel/6/x86_64/

%packages --nobase
@core
openssh-clients
sudo
perl
curl
wget
dkms
%end

%post --log=/root/post-install.log

# vagrant setting
mkdir -m 0700 -p /home/vagrant/.ssh
curl https://raw.githubusercontent.com/mitchellh/vagrant/master/keys/vagrant.pub >> /home/vagrant/.ssh/authorized_keys
chmod 600 /home/vagrant/.ssh/authorized_keys
chown -R vagrant:vagrant /home/vagrant/.ssh

# sudo
echo -e "vagrant ALL=(ALL)  NOPASSWD: ALL\nDefaults: vagrant !requiretty" > /etc/sudoers.d/vagrant
chmod 0440 /etc/sudoers.d/vagrant
